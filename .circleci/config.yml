# Config for the setup workflow and common resources (jobs, commands) for main workflows
# `common-` prefix is added for common resources (to avoid conflicts with module resources)

version: 2.1

setup: true

#parameters:
#  run_integration_tests:
#    type: boolean
#    default: false

#  run_integration_tests2:
#    type: boolean
#    default: false

orbs:
  continuation: circleci/continuation@0.2.0

workflows:
  # The setup workflow
  setup:
    jobs:
      - continuation/continue:
          configuration_path: ".circleci/continue_config.yml"
          parameters: /home/circleci/test.json
          pre-steps:
 #         steps:
 #           - when:
 #               condition: <<pipeline.parameters.run_integration_tests>>
 #               steps:
 #                 - checkout
 #                 - run: echo '{ "EXEC_WF1": true }' >> /home/circleci/test.json
 #           - unless:
 #               condition: <<pipeline.parameters.run_integration_tests2>>
 #               steps:
 #                 - checkout
 #                 - run: echo '{ "EXEC_WF2": true }' >> /home/circleci/test.json
            - checkout
            - run:
                name: Determine if we need to persist and export components
                command: ~/project/bash_test.sh
 #               command: |
 #                 PR_NUM=${CIRCLE_PULL_REQUEST##*/}
 #                 echo $PR_NUM
 #                 if [[! -z "$PR_NUM"]];
 #                 then
 #                   echo '{ "EXEC_WF1": true }' >> /home/circleci/test.json
 #                 else
 #                   echo '{ "EXEC_WF2": true }' >> /home/circleci/test.json
 #                 fi          


